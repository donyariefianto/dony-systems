{
 "name": "struktur_menu",
 "daftar_sidemenu": [
  {
   "id": "fixed_dashboard",
   "name": "Dashboard",
   "icon": "fas fa-home",
   "daftar_sub_sidemenu": [
    {
     "id": "1.1",
     "name": "Dashboard",
     "icon": "fas fa-chart-line",
     "type": "chartview",
     "path": "dashboard",
     "permissions": ["admin", "user"],
     "config": {
      "endpoint": "/api/dashboard/stats",
      "charts": ["overview", "performance"],
      "refreshInterval": 30000
     }
    }
   ]
  },
  {
   "id": "example",
   "name": "Example",
   "icon": "fas fa-home",
   "daftar_sub_sidemenu": [
    {
     "id": "library_loans",
     "name": "Peminjaman Buku",
     "icon": "fas fa-book-reader",
     "type": "tableview",
     "path": "library/loans",
     "config": {
      "endpoint": "/api/collections/loans",
      "collectionName": "loans",
      "fields": [
       {
        "name": "loan_code",
        "label": "Kode Peminjaman",
        "type": "text",
        "required": true,
        "unique": true,
        "placeholder": "LIB-2024-XXX",
        "width": "33"
       },
       {
        "name": "member_id",
        "label": "Anggota Peminjam",
        "type": "relation",
        "relation": {
         "collection": "members",
         "key": "_id",
         "display": "member_name"
        },
        "width": "33"
       },
       {
        "name": "due_date",
        "label": "Tanggal Kembali",
        "type": "date",
        "required": true,
        "width": "33"
       },
       {
        "name": "books_list",
        "label": "Buku yang Dipingjam",
        "type": "repeater",
        "width": "100",
        "sub_fields": [
         {
          "name": "book_id",
          "label": "Judul Buku",
          "type": "relation",
          "relation": {
           "collection": "books",
           "key": "_id",
           "display": "title",
           "auto_populate": {
            "isbn": "isbn_code",
            "author": "author_name"
           }
          }
         },
         {
          "name": "isbn_code",
          "label": "ISBN",
          "type": "text",
          "ui": {
           "readonly": true
          }
         },
         {
          "name": "author_name",
          "label": "Pengarang",
          "type": "text",
          "ui": {
           "readonly": true
          }
         }
        ]
       },
       {
        "name": "status",
        "label": "Status",
        "type": "select",
        "options": ["Dipinjam", "Dikembalikan", "Terlambat", "Hilang"],
        "defaultValue": "Dipinjam",
        "width": "50"
       }
      ]
     }
    },
    {
     "id": "inventory_in",
     "name": "Barang Masuk",
     "icon": "fas fa-dolly",
     "type": "tableview",
     "path": "inventory/stock-in",
     "config": {
      "endpoint": "/api/collections/stock_movements",
      "collectionName": "stock_movements",
      "fields": [
       {
        "name": "ref_code",
        "label": "No. Referensi / PO",
        "type": "text",
        "required": true,
        "width": "50"
       },
       {
        "name": "received_date",
        "label": "Tanggal Terima",
        "type": "date",
        "required": true,
        "width": "50"
       },
       {
        "name": "supplier_id",
        "label": "Supplier / Vendor",
        "type": "relation",
        "relation": {
         "collection": "suppliers",
         "key": "_id",
         "display": "company_name"
        },
        "width": "100"
       },
       {
        "name": "items",
        "label": "Daftar Barang",
        "type": "repeater",
        "sub_fields": [
         {
          "name": "item_id",
          "label": "Nama Barang",
          "type": "relation",
          "relation": {
           "collection": "items",
           "key": "_id",
           "display": "item_name",
           "auto_populate": {
            "unit": "uom"
           }
          }
         },
         {
          "name": "uom",
          "label": "Satuan",
          "type": "text",
          "ui": {
           "readonly": true
          }
         },
         {
          "name": "qty_in",
          "label": "Jumlah Masuk",
          "type": "number",
          "required": true
         },
         {
          "name": "condition",
          "label": "Kondisi",
          "type": "select",
          "options": ["Baik", "Rusak Ringan", "Rusak Berat"],
          "defaultValue": "Baik"
         }
        ]
       },
       {
        "name": "notes",
        "label": "Keterangan",
        "type": "textarea",
        "width": "100"
       }
      ]
     }
    },
    {
     "id": "hrd_employees",
     "name": "Data Karyawan",
     "icon": "fas fa-users",
     "type": "tableview",
     "path": "hr/employees",
     "config": {
      "endpoint": "/api/collections/employees",
      "collectionName": "employees",
      "fields": [
       {
        "name": "nik",
        "label": "Nomor Induk (NIK)",
        "type": "text",
        "required": true,
        "unique": true,
        "width": "50"
       },
       {
        "name": "full_name",
        "label": "Nama Lengkap",
        "type": "text",
        "required": true,
        "width": "50"
       },
       {
        "name": "division_id",
        "label": "Divisi / Departemen",
        "type": "relation",
        "relation": {
         "collection": "divisions",
         "key": "_id",
         "display": "div_name"
        },
        "width": "50"
       },
       {
        "name": "position",
        "label": "Jabatan",
        "type": "text",
        "width": "50"
       },
       {
        "name": "gender",
        "label": "Jenis Kelamin",
        "type": "radio",
        "options": ["Laki-laki", "Perempuan"],
        "width": "50"
       },
       {
        "name": "is_active",
        "label": "Status Aktif",
        "type": "boolean",
        "defaultValue": true,
        "width": "50"
       },
       {
        "name": "photo_profile",
        "label": "Foto Profil",
        "type": "image",
        "width": "50"
       },
       {
        "name": "document_cv",
        "label": "File CV (PDF)",
        "type": "file",
        "width": "50"
       },
       {
        "name": "address",
        "label": "Alamat Domisili",
        "type": "textarea",
        "width": "100"
       }
      ]
     }
    },
    {
     "id": "pos_transaction",
     "name": "Kasir (POS)",
     "icon": "fas fa-cash-register",
     "type": "tableview",
     "path": "sales/pos",
     "config": {
      "endpoint": "/api/collections/transactions",
      "collectionName": "transactions",
      "fields": [
       {
        "name": "invoice_no",
        "label": "No. Invoice",
        "type": "text",
        "required": true,
        "unique": true,
        "placeholder": "INV-2024-XXXX",
        "width": "50"
       },
       {
        "name": "trx_date",
        "label": "Tanggal",
        "type": "date",
        "required": true,
        "width": "50"
       },
       {
        "name": "customer_id",
        "label": "Pelanggan",
        "type": "relation",
        "relation": {
         "collection": "customers",
         "key": "_id",
         "display": "fullname"
        },
        "width": "100"
       },
       {
        "name": "cart_items",
        "label": "Keranjang Belanja",
        "type": "repeater",
        "width": "100",
        "sub_fields": [
         {
          "name": "product_id",
          "label": "Produk",
          "type": "relation",
          "relation": {
           "collection": "products",
           "key": "_id",
           "display": "product_name",
           "auto_populate": {
            "sell_price": "price",
            "sku": "product_code"
           }
          }
         },
         {
          "name": "product_code",
          "label": "SKU",
          "type": "text",
          "ui": {
           "readonly": true
          }
         },
         {
          "name": "price",
          "label": "Harga",
          "type": "currency",
          "ui": {
           "readonly": true
          }
         },
         {
          "name": "qty",
          "label": "Qty",
          "type": "number",
          "defaultValue": 1
         },
         {
          "name": "subtotal",
          "label": "Subtotal",
          "type": "currency",
          "ui": {
           "readonly": true
          },
          "calculation": {
           "operation": "multiply",
           "fields": ["qty", "price"]
          }
         }
        ]
       },
       {
        "name": "grand_total",
        "label": "Total Bayar",
        "type": "currency",
        "ui": {
         "readonly": true
        },
        "width": "50"
       },
       {
        "name": "payment_method",
        "label": "Metode Bayar",
        "type": "select",
        "options": ["Cash", "QRIS", "Debit Card", "Credit Card"],
        "width": "50"
       }
      ]
     }
    }
   ]
  },
  {
   "id": "fixed_settings",
   "name": "Settings",
   "icon": "fas fa-cogs",
   "permissions": ["admin"],
   "daftar_sub_sidemenu": [
    {
     "id": "8.1",
     "name": "User Management",
     "icon": "fas fa-users-cog",
     "type": "tableview",
     "path": "settings/users",
     "config": {
      "endpoint": "/api/collections/users",
      "collectionName": "users",
      "fields": [
       {
        "name": "username",
        "label": "Username",
        "type": "text",
        "required": true,
        "unique": true
       },
       {
        "name": "email",
        "label": "Email",
        "type": "email",
        "required": true,
        "unique": true
       },
       {
        "name": "role",
        "label": "Role",
        "type": "select",
        "options": ["admin", "warehouse", "finance", "user"],
        "required": true
       },
       {
        "name": "status",
        "label": "Status Akun",
        "type": "select",
        "options": ["Active", "Inactive", "Suspended"],
        "default": "Active"
       },
       {
        "name": "last_login",
        "label": "Terakhir Login",
        "type": "datetime",
        "readonly": true
       }
      ],
      "operations": {
       "create": true,
       "read": true,
       "update": true,
       "delete": true,
       "reset_password": true
      }
     }
    },
    {
     "id": "8.2",
     "name": "Role & Permissions",
     "icon": "fas fa-user-shield",
     "type": "tableview",
     "path": "settings/roles",
     "config": {
      "endpoint": "/api/collections/roles",
      "collectionName": "roles",
      "fields": [
       {
        "name": "role_name",
        "label": "Nama Role",
        "type": "text",
        "required": true
       },
       {
        "name": "access_level",
        "label": "Level Akses",
        "type": "number",
        "required": true
       },
       {
        "name": "permissions",
        "label": "Izin Akses",
        "type": "multiselect",
        "options": ["read_dashboard", "write_stock", "manage_users", "view_reports"]
       }
      ]
     }
    },
    {
     "id": "8.3",
     "name": "App Config",
     "icon": "fas fa-sliders-h",
     "type": "settings",
     "path": "settings/config",
     "config": {
      "endpoint": "/api/settings/general",
      "collectionName": "app_config",
      "fields": [
       {
        "name": "app_name",
        "label": "Nama Aplikasi",
        "type": "text",
        "default": "TB Sahabat System"
       },
       {
        "name": "maintenance_mode",
        "label": "Mode Maintenance",
        "type": "boolean",
        "default": false
       },
       {
        "name": "timezone",
        "label": "Zona Waktu Default",
        "type": "select",
        "options": ["Asia/Jakarta", "Asia/Makassar", "Asia/Jayapura"],
        "default": "Asia/Jakarta"
       }
      ]
     }
    },
    {
     "id": "8.4",
     "name": "Audit Logs",
     "icon": "fas fa-history",
     "type": "tableview",
     "path": "settings/logs",
     "config": {
      "endpoint": "/api/logs/system",
      "collectionName": "system_logs",
      "fields": [
       {
        "name": "timestamp",
        "label": "Waktu",
        "type": "datetime"
       },
       {
        "name": "user",
        "label": "User",
        "type": "text"
       },
       {
        "name": "action",
        "label": "Aktivitas",
        "type": "text"
       },
       {
        "name": "ip_address",
        "label": "IP Address",
        "type": "text"
       }
      ],
      "operations": {
       "create": false,
       "read": true,
       "update": false,
       "delete": false,
       "export": true
      }
     }
    }
   ]
  }
 ]
}
